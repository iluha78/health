# üì¶ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –§–æ—Ç–æ –µ–¥—ã –∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –¥–Ω—è–º

## üéØ –ß—Ç–æ –Ω–æ–≤–æ–≥–æ

### ‚ú® –§–æ—Ç–æ –µ–¥—ã —Å –∫–∞–ª–æ—Ä–∏—è–º–∏
- **üì∏ AI-–∞–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –±–ª—é–¥–∞ –∏ –∫–∞–ª–æ—Ä–∏–π
- **üìä –°—É–º–º–∞ –∫–∞–ª–æ—Ä–∏–π –∑–∞ –¥–µ–Ω—å** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Å—á–µ—Ç
- **üìÖ –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø–æ –¥–Ω—è–º** - –≤—Å–µ –∑–∞–ø–∏—Å–∏ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –¥–∞—Ç–∞–º
- **‚úèÔ∏è –†—É—á–Ω–æ–π –≤–≤–æ–¥** - –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –±–µ–∑ —Ñ–æ—Ç–æ
- **üìñ –ò—Å—Ç–æ—Ä–∏—è** - –ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–ø–∏—Å–µ–π –ø–æ –¥–Ω—è–º

### üí° –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –Ω—É—Ç—Ä–∏—Ü–∏–æ–ª–æ–≥–∞
- **üìÖ –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –¥–∞—Ç–∞–º** - –∫–∞–∂–¥–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Å –¥–∞—Ç–æ–π
- **üìö –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ –¥–Ω—è–º** - –≤—Å–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –¥–µ–Ω—å
- **üìä –ò—Å—Ç–æ—Ä–∏—è** - —Å–≤–æ–¥–∫–∞ –ø–æ –¥–Ω—è–º —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π

---

## üöÄ –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏
./install_daily_nutrition.sh

# –°–ª–µ–¥–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –Ω–∞ —ç–∫—Ä–∞–Ω–µ
```

**–í—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏:** ~3 –º–∏–Ω—É—Ç—ã

---

## üì¶ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–∫–µ—Ç–∞

### üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (2 —Ñ–∞–π–ª–∞)
1. **DAILY_NUTRITION_API.md** - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
2. **DAILY_NUTRITION_QUICKSTART.md** - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏

### üõ†Ô∏è Backend —Ñ–∞–π–ª—ã (6 —Ñ–∞–π–ª–æ–≤)

**–ú–∏–≥—Ä–∞—Ü–∏—è:**
- `backend_migrations_006_daily_nutrition.sql` - —Å–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—ã

**–ú–æ–¥–µ–ª–∏:**
- `backend_DailyFoodPhoto.php` - –º–æ–¥–µ–ª—å –¥–ª—è —Ñ–æ—Ç–æ –µ–¥—ã
- `backend_NutritionAdvice.php` - –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π

**–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã:**
- `backend_DailyFoodPhotoController.php` - API –¥–ª—è —Ñ–æ—Ç–æ –µ–¥—ã
- `backend_NutritionAdviceController.php` - API –¥–ª—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π

**–†–æ—É—Ç—ã:**
- `routes_updated.php` - –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ä–æ—É—Ç—ã

### üöÄ –°–∫—Ä–∏–ø—Ç
- `install_daily_nutrition.sh` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

---

## üìä –ù–æ–≤—ã–µ API Endpoints

### –§–æ—Ç–æ –µ–¥—ã —Å –∫–∞–ª–æ—Ä–∏—è–º–∏

```
GET    /daily-food/{date}        # –ó–∞–ø–∏—Å–∏ –∑–∞ –¥–µ–Ω—å + —Å—É–º–º–∞ –∫–∞–ª–æ—Ä–∏–π
POST   /daily-food               # –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å (—Å —Ñ–æ—Ç–æ –∏–ª–∏ –≤—Ä—É—á–Ω—É—é)
GET    /daily-food-history       # –ò—Å—Ç–æ—Ä–∏—è –ø–æ –¥–Ω—è–º
DELETE /daily-food/{id}          # –£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å
```

### –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –Ω—É—Ç—Ä–∏—Ü–∏–æ–ª–æ–≥–∞

```
GET    /nutrition-advice/{date}  # –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –∑–∞ –¥–µ–Ω—å
POST   /nutrition-advice         # –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é
GET    /nutrition-advice-history # –ò—Å—Ç–æ—Ä–∏—è –ø–æ –¥–Ω—è–º
DELETE /nutrition-advice/{id}    # –£–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é
```

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ –µ–¥—ã (AI –∞–Ω–∞–ª–∏–∑)

```bash
curl -X POST http://localhost:8080/daily-food \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -F "photo=@lunch.jpg" \
  -F "date=2025-11-07" \
  -F "time=13:00:00"
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ñ–æ—Ç–æ
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ –±–ª—é–¥–∞
- –û—Ü–µ–Ω–∏–≤–∞–µ—Ç –∫–∞–ª–æ—Ä–∏–π–Ω–æ—Å—Ç—å
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ë–î

### 2. –ü–æ–ª—É—á–∏—Ç—å –¥–µ–Ω—å —Å —Å—É–º–º–æ–π –∫–∞–ª–æ—Ä–∏–π

```bash
curl -H "Authorization: Bearer YOUR_TOKEN" \
  http://localhost:8080/daily-food/2025-11-07
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "date": "2025-11-07",
  "photos": [...],
  "total_calories": 1850
}
```

### 3. –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é

```bash
curl -X POST http://localhost:8080/nutrition-advice \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "date": "2025-11-07",
    "focus": "–°–Ω–∏–∂–µ–Ω–∏–µ —Ö–æ–ª–µ—Å—Ç–µ—Ä–∏–Ω–∞"
  }'
```

---

## üîß –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### –®–∞–≥ 1: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

```bash
# –ú–∏–≥—Ä–∞—Ü–∏—è
cp backend_migrations_006_daily_nutrition.sql \
   backend/migrations/006_daily_nutrition.sql

# –ú–æ–¥–µ–ª–∏
cp backend_DailyFoodPhoto.php \
   backend/src/Models/DailyFoodPhoto.php
cp backend_NutritionAdvice.php \
   backend/src/Models/NutritionAdvice.php

# –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
cp backend_DailyFoodPhotoController.php \
   backend/src/Controllers/DailyFoodPhotoController.php
cp backend_NutritionAdviceController.php \
   backend/src/Controllers/NutritionAdviceController.php

# –†–æ—É—Ç—ã
cp routes_updated.php \
   backend/config/routes.php
```

### –®–∞–≥ 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ autoload

```bash
cd backend
composer dump-autoload
```

### –®–∞–≥ 3: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
# –í–∞—Ä–∏–∞–Ω—Ç 1: Composer
composer migrate

# –í–∞—Ä–∏–∞–Ω—Ç 2: Docker
docker-compose restart backend
```

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—ã

```bash
mysql -u root -p cholestofit -e "SHOW TABLES LIKE 'daily_food_photos';"
mysql -u root -p cholestofit -e "DESCRIBE nutrition_advices;"
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `daily_food_photos` —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ –í —Ç–∞–±–ª–∏—Ü–µ `nutrition_advices` –µ—Å—Ç—å –ø–æ–ª–µ `advice_date`

### 2. –¢–µ—Å—Ç API

```bash
# –§–æ—Ç–æ –µ–¥—ã
curl -H "Authorization: Bearer YOUR_TOKEN" \
  http://localhost:8080/daily-food/$(date +%Y-%m-%d)

# –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏
curl -H "Authorization: Bearer YOUR_TOKEN" \
  http://localhost:8080/nutrition-advice/$(date +%Y-%m-%d)
```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü

### daily_food_photos (–Ω–æ–≤–∞—è)

```sql
CREATE TABLE daily_food_photos (
  id INT PRIMARY KEY AUTO_INCREMENT,
  user_id INT NOT NULL,
  photo_date DATE NOT NULL,
  title VARCHAR(190) NOT NULL,
  description TEXT,
  estimated_calories INT,
  photo_time TIME,
  note VARCHAR(500),
  created_at TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id)
);
```

### nutrition_advices (–æ–±–Ω–æ–≤–ª–µ–Ω–∞)

**–î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ:**
```sql
advice_date DATE NOT NULL
```

**–ò–Ω–¥–µ–∫—Å:**
```sql
INDEX idx_user_date (user_id, advice_date DESC)
```

---

## üé® Frontend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### React Hook

```typescript
import { useState, useCallback } from 'react';

export function useDailyFood(token: string) {
  // –ü–æ–ª—É—á–∏—Ç—å –¥–µ–Ω—å —Å —Å—É–º–º–æ–π –∫–∞–ª–æ—Ä–∏–π
  const getDay = useCallback(async (date: string) => {
    const res = await fetch(`/api/daily-food/${date}`, {
      headers: { 'Authorization': `Bearer ${token}` }
    });
    return res.json();
  }, [token]);

  // –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ
  const addPhoto = useCallback(async (
    file: File,
    date: string
  ) => {
    const formData = new FormData();
    formData.append('photo', file);
    formData.append('date', date);

    const res = await fetch('/api/daily-food', {
      method: 'POST',
      headers: { 'Authorization': `Bearer ${token}` },
      body: formData
    });
    return res.json();
  }, [token]);

  return { getDay, addPhoto };
}
```

### –ü—Ä–∏–º–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

```typescript
function DailyFoodTracker() {
  const [date, setDate] = useState('2025-11-07');
  const [dayData, setDayData] = useState(null);
  const { getDay, addPhoto } = useDailyFood(token);

  useEffect(() => {
    getDay(date).then(setDayData);
  }, [date]);

  return (
    <div>
      <input
        type="date"
        value={date}
        onChange={(e) => setDate(e.target.value)}
      />
      
      {dayData && (
        <>
          <h3>–ö–∞–ª–æ—Ä–∏–∏ –∑–∞ –¥–µ–Ω—å: {dayData.total_calories} –∫–∫–∞–ª</h3>
          {dayData.photos.map(photo => (
            <div key={photo.id}>
              <strong>{photo.title}</strong>
              <span>{photo.estimated_calories} –∫–∫–∞–ª</span>
            </div>
          ))}
        </>
      )}
    </div>
  );
}
```

---

## üí° –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### AI-–∞–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –±–ª—é–¥–∞
- –û—Ü–µ–Ω–∫–∞ –∫–∞–ª–æ—Ä–∏–π–Ω–æ—Å—Ç–∏
- –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ—Å—Ç–∞–≤–∞
- –†–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ —Ñ–æ—Ç–æ –µ–¥—ã

### –ü–æ–¥—Å—á–µ—Ç –∫–∞–ª–æ—Ä–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å—É–º–º–∞ –∑–∞ –¥–µ–Ω—å
- –£—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤—Å–µ –∑–∞–ø–∏—Å–∏
- –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏/—É–¥–∞–ª–µ–Ω–∏–∏

### –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø–æ –¥–Ω—è–º
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –¥–∞—Ç–∞–º
- –£–¥–æ–±–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –≤ API

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **AI-–∞–Ω–∞–ª–∏–∑** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–∏–º–∏—Ç AI-–∑–∞–ø—Ä–æ—Å–æ–≤
2. **–ö–∞–ª–æ—Ä–∏–∏** - –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞
3. **–§–æ—Ç–æ** —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ (–ø–æ–∫–∞)
4. **–î–∞—Ç–∞** –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é - —Ç–µ–∫—É—â–∞—è
5. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Å—Ç–∞—Ä—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã `/advice/nutrition` –æ—Å—Ç–∞—é—Ç—Å—è

---

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å —Å—Ç–∞—Ä—ã–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –±–µ–∑ –¥–∞—Ç—ã, –º–∏–≥—Ä–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –î–æ–±–∞–≤–∏—Ç –ø–æ–ª–µ `advice_date`
2. –ó–∞–ø–æ–ª–Ω–∏—Ç –µ–≥–æ –∏–∑ `created_at`
3. –°–¥–µ–ª–∞–µ—Ç –ø–æ–ª–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º

–í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è!

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **DAILY_NUTRITION_API.md** - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö endpoints
- **DAILY_NUTRITION_QUICKSTART.md** - –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **–ü—Ä–∏–º–µ—Ä—ã React –∫–æ–¥–∞** - –≤ DAILY_NUTRITION_API.md

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–∏–ª–∞—Å—å
- [ ] –¢–∞–±–ª–∏—Ü–∞ `daily_food_photos` —Å–æ–∑–¥–∞–Ω–∞
- [ ] –ü–æ–ª–µ `advice_date` –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ `nutrition_advices`
- [ ] API endpoints –æ—Ç–≤–µ—á–∞—é—Ç
- [ ] –¢–µ—Å—Ç —Å —Ñ–æ—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Frontend –æ–±–Ω–æ–≤–ª–µ–Ω

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å:
- ‚úÖ –§–æ—Ç–æ –µ–¥—ã —Å AI-–∞–Ω–∞–ª–∏–∑–æ–º –∫–∞–ª–æ—Ä–∏–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Å—á–µ—Ç —Å—É–º–º—ã –∑–∞ –¥–µ–Ω—å
- ‚úÖ –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –Ω—É—Ç—Ä–∏—Ü–∏–æ–ª–æ–≥–∞ –ø–æ –¥–Ω—è–º
- ‚úÖ –£–¥–æ–±–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –ø–æ –¥–Ω—è–º
- ‚úÖ –ì–∏–±–∫–æ–µ API –¥–ª—è frontend

**–ü—Ä–∏—è—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è! üçΩÔ∏è**
